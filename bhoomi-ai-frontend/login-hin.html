<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рд╢реБрд░реВ рдХрд░реЗрдВ - рднреВрдорд┐AI</title>
    <link rel="stylesheet" href="login.style.css">
</head>
<body>
    <div class="login-container">
        <div class="login-card">
            <a href="index.html" class="logo">ЁЯМ▒ рднреВрдорд┐AI</a>
            <h2>рд╕реНрд╡рд╛рдЧрдд рд╣реИ, рдХрд┐рд╕рд╛рди!</h2>
            <p class="description">рдЕрдкрдиреЗ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдбреИрд╢рдмреЛрд░реНрдб рдкрд░ рдЖрдЧреЗ рдмрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдирд╛ рд╡рд┐рд╡рд░рдг рджрд░реНрдЬ рдХрд░реЗрдВред</p>
            <div class="form-group">
                <label for="name">рдЖрдкрдХрд╛ рдкреВрд░рд╛ рдирд╛рдо</label>
                <input type="text" id="name" placeholder="рд░рдореЗрд╢ рдХреБрдорд╛рд░">
            </div>
            <div class="form-group">
                <label for="email">рдЖрдкрдХрд╛ рдИрдореЗрд▓ рдкрддрд╛</label>
                <input type="email" id="email" placeholder="ramesh@farm.com">
            </div>
            <div class="form-group">
                <label for="location">рдЖрдкрдХрд╛ рдкреНрд░рд╛рдердорд┐рдХ рд╕реНрдерд╛рди (рдЙрджрд╛., рд╢рд╣рд░, рд░рд╛рдЬреНрдп)</label>
                <input type="text" id="location" placeholder="рдкреБрдгреЗ, рднрд╛рд░рдд">
            </div>
            <button id="identify-btn" class="btn btn-primary">рдбреИрд╢рдмреЛрд░реНрдб рдкрд░ рдЬрд╛рд░реА рд░рдЦреЗрдВ</button>
            <p id="status-message"></p>
        </div>
    </div>

    <!-- We need Axios for the API call -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        const identifyBtn = document.getElementById('identify-btn');
        const statusMessage = document.getElementById('status-message');

        identifyBtn.addEventListener('click', async () => {
            const userData = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                location: document.getElementById('location').value,
            };

            if (!userData.email || !userData.name || !userData.location) {
                statusMessage.textContent = 'рдХреГрдкрдпрд╛ рд╕рднреА рдлрд╝реАрд▓реНрдб рднрд░реЗрдВред';
                return;
            }

            statusMessage.textContent = 'рд╡рд┐рд╡рд░рдг рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИ...';
            identifyBtn.disabled = true;

            try {
                const response = await axios.post('http://localhost:8080/api/v1/users/identify', userData);
                
                // Save user data to localStorage to pass it to the dashboard
                localStorage.setItem('bhoomiAiUser', JSON.stringify(response.data));

                // Redirect to the dashboard page!
                window.location.href = 'dashboard.html';

            } catch (error) {
                console.error(error);
                statusMessage.textContent = 'рддреНрд░реБрдЯрд┐: рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдирд╣реАрдВ рд╣реЛ рд╕рдХрд╛ред';
                identifyBtn.disabled = false;
            }
        });
    </script>
</body>
</html>